(()=>{var e={};e.id=962,e.ids=[962],e.modules={846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},9121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},9294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},3033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},2412:e=>{"use strict";e.exports=require("assert")},4735:e=>{"use strict";e.exports=require("events")},9021:e=>{"use strict";e.exports=require("fs")},1630:e=>{"use strict";e.exports=require("http")},5591:e=>{"use strict";e.exports=require("https")},1820:e=>{"use strict";e.exports=require("os")},3873:e=>{"use strict";e.exports=require("path")},7910:e=>{"use strict";e.exports=require("stream")},3997:e=>{"use strict";e.exports=require("tty")},9551:e=>{"use strict";e.exports=require("url")},8354:e=>{"use strict";e.exports=require("util")},4075:e=>{"use strict";e.exports=require("zlib")},402:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>i.a,__next_app__:()=>p,pages:()=>c,routeModule:()=>h,tree:()=>d});var s=r(260),a=r(8203),l=r(5155),i=r.n(l),n=r(7292),o={};for(let e in n)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>n[e]);r.d(t,o);let d=["",{children:["pages",{children:["report",{children:["[id]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,2301)),"C:\\Users\\sayki\\IdeaProjects\\DH-International-2024\\web-view\\src\\app\\pages\\report\\[id]\\page.tsx"]}]},{}]},{}]},{metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,1354)),"C:\\Users\\sayki\\IdeaProjects\\DH-International-2024\\web-view\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,9937,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],c=["C:\\Users\\sayki\\IdeaProjects\\DH-International-2024\\web-view\\src\\app\\pages\\report\\[id]\\page.tsx"],p={require:r,loadChunk:()=>Promise.resolve()},h=new s.AppPageRouteModule({definition:{kind:a.RouteKind.APP_PAGE,page:"/pages/report/[id]/page",pathname:"/pages/report/[id]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},2538:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,3219,23)),Promise.resolve().then(r.t.bind(r,4863,23)),Promise.resolve().then(r.t.bind(r,5155,23)),Promise.resolve().then(r.t.bind(r,9350,23)),Promise.resolve().then(r.t.bind(r,6313,23)),Promise.resolve().then(r.t.bind(r,8530,23)),Promise.resolve().then(r.t.bind(r,8921,23))},5586:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,6959,23)),Promise.resolve().then(r.t.bind(r,3875,23)),Promise.resolve().then(r.t.bind(r,8903,23)),Promise.resolve().then(r.t.bind(r,4178,23)),Promise.resolve().then(r.t.bind(r,6013,23)),Promise.resolve().then(r.t.bind(r,7190,23)),Promise.resolve().then(r.t.bind(r,1365,23))},8373:()=>{},2293:()=>{},7508:(e,t,r)=>{Promise.resolve().then(r.bind(r,2301))},244:(e,t,r)=>{Promise.resolve().then(r.bind(r,8228))},4399:(e,t,r)=>{"use strict";r.d(t,{Y:()=>n});var s=r(5512),a=r(5103);let l={src:"/_next/static/media/logo.64cdc4f2.svg",height:80,width:80,blurWidth:0,blurHeight:0};var i=r(6008);function n(){return(0,s.jsx)("div",{className:"flex items-center bg-[#222E3A] ",children:(0,s.jsxs)(i.default,{href:"/",className:"flex items-center bg-[#222E3A] ",children:[(0,s.jsx)(a.default,{src:l,width:70,height:70,alt:"Logo"}),(0,s.jsx)("h1",{className:"font-[500] text-[20px] ml-2 text-[#f8f9fa]",children:"Обнаружение животных"})]})})}},8228:(e,t,r)=>{"use strict";r.r(t),r.d(t,{HandleModal:()=>p,default:()=>h});var s=r(5512),a=r(8009),l=r(5668),i=r(4399);let n={src:"/_next/static/media/cloud.2941b90f.svg",height:90,width:90,blurWidth:0,blurHeight:0};var o=r(5103),d=r(4880);let c=l.A.create({baseURL:"http://localhost:8080/api/v1/neural/"});function p({onClose:e,params:t}){let[r,l]=(0,a.useState)([]),[i,p]=(0,a.useState)(!1),h=[".zip",".rar",".png",".jpg",".jpeg"],u=e=>{let t=e.name.substring(e.name.lastIndexOf(".")).toLowerCase();return h.includes(t)},x=async()=>{if(0===r.length){alert("Пожалуйста, выберите файлы для отправки.");return}let s=new FormData;r.forEach(e=>{s.append("file",e)});try{let r=await c.post(`upload_report/${t.id}`,s);200===r.status?(alert("Файлы успешно отправлены!"),l([]),e()):alert("Ошибка при отправке файлов.")}catch(e){console.error("Ошибка при отправке:",e),alert("Произошла ошибка при отправке файлов.")}};return(0,s.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center text-white",children:(0,s.jsxs)("div",{className:"bg-gray-800 p-4 rounded-lg shadow-lg w-[90%] max-w-md h-[500px]",children:[(0,s.jsx)("div",{className:"flex justify-end",children:(0,s.jsx)("button",{onClick:e,className:"pb-3",children:(0,s.jsx)(o.default,{src:d.A,width:20,height:20,alt:"Close"})})}),(0,s.jsx)("div",{className:`flex flex-col items-center justify-center p-4 rounded-lg h-[380px]
                ${i?"border-2 border-dashed border-blue-500":"border border-gray-600"}`,onDragOver:e=>{e.preventDefault(),p(!0)},onDragLeave:()=>{p(!1)},onDrop:e=>{e.preventDefault(),p(!1),e.dataTransfer.files&&l(Array.from(e.dataTransfer.files).filter(u))},children:(0,s.jsx)("label",{className:"mb-4 cursor-pointer px-4 py-2 rounded text-center w-[100%]",children:(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center",children:[(0,s.jsx)(o.default,{src:n,width:100,height:100,alt:"Logo"}),(0,s.jsx)("input",{type:"file",multiple:!0,onChange:e=>{e.target.files&&l(Array.from(e.target.files).filter(u))},accept:".zip,.rar,.png,.jpg,.jpeg",className:"hidden"}),(0,s.jsx)("p",{className:"mb-4",children:r.length>0?`Выбрано файлов: ${r.length}`:"Файлы не выбраны"})]})})}),(0,s.jsxs)("div",{className:"flex justify-center gap-4 mt-5",children:[(0,s.jsx)("button",{onClick:x,className:"px-4 py-2 bg-green-500 hover:bg-green-600 rounded w-[120px]",children:"Отправить"}),(0,s.jsx)("button",{onClick:()=>{l([])},className:"px-4 py-2 bg-red-500 hover:bg-red-600 rounded w-[120px]",children:"Очистить"})]})]})})}function h({params:e}){let[t,r]=(0,a.useState)([]),[l,h]=(0,a.useState)(!1),[u,x]=(0,a.useState)([]),[m,b]=(0,a.useState)(1),[g,f]=(0,a.useState)([]),[v,j]=(0,a.useState)(!1),y=Math.ceil(u.length/8),w=u.slice((m-1)*8,8*m),N=[".zip",".rar",".png",".jpg",".jpeg"],C=e=>{let t=e.name.substring(e.name.lastIndexOf(".")).toLowerCase();return N.includes(t)},P=async()=>{if(0===t.length){alert("Пожалуйста, выберите файлы для отправки.");return}let s=new FormData;t.forEach(e=>{s.append("file",e)});try{let t=await c.post(`upload_report/${e.id}`,s);200===t.status?(alert("Файлы успешно отправлены!"),r([]),await D()):alert("Ошибка при отправке файлов.")}catch(e){console.error("Ошибка при отправке:",e),alert("Произошла ошибка при отправке файлов.")}},k=e=>{e>0&&e<=y&&b(e)},_=async e=>{try{await c.delete(`reports/remove/${e}`)}catch(e){console.error(`Ошибка при удалении`,e)}},A=async e=>{try{await _(e),await D()}catch(e){console.log("Ошибка при удалении",e)}},D=async()=>{try{let t=await c.get(`reports/all/${e.id}`);200===t.status&&Array.isArray(t.data)&&x(t.data)}catch(e){console.error("Ошибка при получении данных отчёта:",e)}},q=async()=>{try{let t=await c.get(`reports/csv/${e.id}`);if(200===t.status){let r=`report_${e.id}.csv`,s=t.data,a=document.createElement("a");a.href=`data:text/csv;charset=utf-8,${encodeURIComponent(s)}`,a.setAttribute("download",r),document.body.appendChild(a),a.click(),document.body.removeChild(a)}else alert("Ошибка при скачивании CSV файла.")}catch(e){console.error("Ошибка при скачивании CSV файла:",e),alert("Произошла ошибка при скачивании файла.")}};return(0,s.jsxs)("div",{className:"bg-gradient-to-b from-[#485563] to-[#29323c] h-[100vh]",children:[(0,s.jsx)(i.Y,{}),(0,s.jsx)("div",{className:"h-[90vh] flex flex-col items-center justify-center text-white",children:0===u.length?(0,s.jsxs)("div",{className:`flex flex-col items-center justify-center p-4 bg-gray-800 rounded-lg shadow-lg h-[400px] w-[90%] max-w-md 
                        ${l?"border-2 border-dashed border-blue-500 transition-all duration-200 ease-in-out":"border border-gray-600"}`,onDragOver:e=>{e.preventDefault(),h(!0)},onDragLeave:()=>{h(!1)},onDrop:e=>{e.preventDefault(),h(!1),e.dataTransfer.files&&r(Array.from(e.dataTransfer.files).filter(C))},children:[(0,s.jsx)("label",{className:"mb-4 cursor-pointer px-4 py-2 rounded text-center w-[100%] h-[100%]",children:(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center h-[100%] ",children:[(0,s.jsx)(o.default,{src:n,width:100,height:100,alt:"Logo"}),(0,s.jsx)("input",{type:"file",multiple:!0,onChange:e=>{e.target.files&&r(Array.from(e.target.files).filter(C))},accept:".zip,.rar,.png,.jpg,.jpeg",className:"hidden"}),(0,s.jsx)("p",{className:"mb-4",children:t.length>0?`Выбрано файлов: ${t.length}`:"Файлы не выбраны"})]})}),(0,s.jsxs)("div",{className:"flex gap-4 mt-5",children:[(0,s.jsx)("button",{onClick:P,className:"px-4 py-2 bg-green-500 hover:bg-green-600 rounded w-[120px]",children:"Отправить"}),(0,s.jsx)("button",{onClick:()=>{r([])},className:"px-4 py-2 bg-red-500 hover:bg-red-600 rounded w-[120px]",children:"Очистить"})]})]}):(0,s.jsxs)("div",{className:"w-full flex flex-col items-center h-[700px]",children:[(0,s.jsx)("div",{className:"flex w-3/4 justify-end",children:(0,s.jsxs)("div",{className:"mt-4",children:[(0,s.jsx)("button",{onClick:()=>j(!0),className:"px-4 py-2 bg-green-600 hover:bg-green-700 rounded w-[180px] mt-4",children:"Добавить данных"}),(0,s.jsx)("button",{onClick:q,className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 rounded w-[150px]",children:"Скачать CSV"}),(0,s.jsx)("button",{onClick:()=>{window.print()},className:"px-4 py-2 bg-red-600 hover:bg-red-700 rounded w-[180px] mt-4",children:"Сохранить как PDF"})]})}),(0,s.jsxs)("div",{className:"bg-gray-800 text-white p-6 rounded-lg shadow-lg w-3/4 flex flex-col items-center h-[600px] tbl",children:[(0,s.jsx)("h1",{className:"text-[22px] mb-4 text-center",children:"Отчет"}),(0,s.jsx)("div",{className:"w-full overflow-auto flex-grow",children:(0,s.jsxs)("table",{className:"w-full text-left",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"px-4 py-2 border-b border-gray-700",children:"Дата загрузки"}),(0,s.jsx)("th",{className:"px-4 py-2 border-b border-gray-700",children:"Путь к файлу"}),(0,s.jsx)("th",{className:"px-4 py-2 border-b border-gray-700",children:"Класс"}),(0,s.jsx)("th",{className:"px-4 py-2 border-b border-gray-700",children:"Точность"})]})}),(0,s.jsx)("tbody",{children:w.map(e=>(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{className:"px-4 py-2",children:e.data_upload}),(0,s.jsx)("td",{className:"px-4 py-2",children:e.file_path}),(0,s.jsx)("td",{className:"px-4 py-2",children:e.class_num}),(0,s.jsx)("td",{className:"px-4 py-2",children:e.confidence}),(0,s.jsx)("td",{className:"px-4 py-2",children:(0,s.jsx)("button",{onClick:()=>A(e.uid),className:"text-red-500",children:(0,s.jsx)(o.default,{className:"fill-red-500",src:d.A,width:25,height:25,alt:"del"})})})]},e.uid))})]})}),(0,s.jsxs)("div",{className:"flex justify-center mt-4 w-full",children:[(0,s.jsx)("button",{onClick:()=>k(m-1),disabled:1===m,className:"px-4 py-2 mx-1 bg-[#222E3A] disabled:bg-gray-500 rounded disabled:opacity-50 border-[1px]",children:"Предыдущая"}),(0,s.jsxs)("span",{className:"px-4 py-2 needhide",children:["Страница ",m," из ",y]}),(0,s.jsx)("button",{onClick:()=>k(m+1),disabled:m===y,className:"px-4 py-2 mx-1 bg-[#222E3A] disabled:bg-gray-500 rounded disabled:opacity-50 border-[1px]",children:"Следующая"})]})]})]})}),v&&(0,s.jsx)(p,{params:e,onClose:()=>j(!1)})]})}},1354:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>d,metadata:()=>o});var s=r(2740),a=r(6381),l=r.n(a),i=r(3704),n=r.n(i);r(1135);let o={title:"Create Next App",description:"Generated by create next app"};function d({children:e}){return(0,s.jsx)("html",{lang:"en",children:(0,s.jsx)("body",{className:`${l().variable} ${n().variable} antialiased`,children:e})})}},2301:(e,t,r)=>{"use strict";r.r(t),r.d(t,{HandleModal:()=>a,default:()=>l});var s=r(6760);let a=(0,s.registerClientReference)(function(){throw Error("Attempted to call HandleModal() from the server but HandleModal is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\Users\\sayki\\IdeaProjects\\DH-International-2024\\web-view\\src\\app\\pages\\report\\[id]\\page.tsx","HandleModal"),l=(0,s.registerClientReference)(function(){throw Error("Attempted to call the default export of \"C:\\\\Users\\\\sayki\\\\IdeaProjects\\\\DH-International-2024\\\\web-view\\\\src\\\\app\\\\pages\\\\report\\\\[id]\\\\page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\Users\\sayki\\IdeaProjects\\DH-International-2024\\web-view\\src\\app\\pages\\report\\[id]\\page.tsx","default")},4880:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s={src:"/_next/static/media/Close.f7b2a5d2.svg",height:90,width:90,blurWidth:0,blurHeight:0}},440:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>a});var s=r(8077);let a=async e=>[{type:"image/x-icon",sizes:"16x16",url:(0,s.fillMetadataSegment)(".",await e.params,"favicon.ico")+""}]},1135:()=>{}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[989,735,43],()=>r(402));module.exports=s})();